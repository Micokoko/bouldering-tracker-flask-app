{% extends 'base.html' %}

{% block content %}
<section class="inline-block  text-white p-4">

    <div class="w-full max-w-sm bg-white border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700">
        <div class="flex flex-col items-center pb-10">
            <img class="w-24 h-24 mb-3 rounded-full shadow-lg" src="{{ url_for('static', filename='uploads/DOG.png') }}" alt="Dog photo for now"/>
            <header>
            <h1 class="mb-1 text-xl font-medium text-gray-900 dark:text-white">{{ g.user['firstname'] }} {{ g.user['Lastname'] }}</h1>
            </header>

        <div>
                <div>
                    <div class="p-3 border border-gray-200 rounded-lg shadow w-32">Highest grade climbed: 
                        <h3>v{{ highest_grade_climbed }}</h3>
                    </div>
                    <div class="p-3 border border-gray-200 rounded-lg shadow w-32">Highest grade flashed: 
                        <h3>v{{ highest_grade_flashed }}</h3>
                    </div>
                    <div class="p-3 border border-gray-200 rounded-lg shadow w-32">Total boulders sent: 
                        <h3>{{ boulders_completed }}</h3>
                    </div>
                
            </div>
        </div>
    </div>


    <h1>Ranked Boulders (V6 and above)</h1>
    {% if ranked_boulders %}
        <table class="table table-striped table-bordered" id="rankedBoulderTable" style="background-color: #76ABAE;">
            <thead>
                <tr>
                    <th class="text-center">Name</th>
                    <th class="text-center">Color</th>
                    <th class="text-center">Difficulty</th>
                    <th class="text-center">Moves</th>
                    <th class="text-center">Attempts</th>
                    <th class="text-center">Status</th>
                    <th class="text-center">Attempt Date</th>
                    <th class="text-center">Log Ascent</th>
                </tr>
            </thead>
            <tbody>
                {% for boulder in ranked_boulders %}
                    <tr>
                        <td class="text-center">{{ boulder.name }}</td>
                        <td>
                            <div class="card" style="background-color: {{ boulder.color }}; width: 30px; height: 30px; border-radius: 50%;"></div>
                        </td>
                        <td class="text-center">V{{ boulder.difficulty }}</td>
                        <td class="text-center">{{ boulder.numberofmoves }}</td>

                        {% set attempt = boulder.attempt %}
                        {% if attempt and attempt.status == 'incomplete' %}
                            <td class="text-center">{{ attempt.number_of_attempts }}</td>
                            <td class="text-center">
                                Incomplete ({{ attempt.moves_completed }} / {{ boulder.numberofmoves }} moves)
                            </td>
                            <td class="text-center">{{ attempt.attempt_date }}</td>
                        {% else %}
                            <td class="text-center">0</td>
                            <td class="text-center">No log record yet</td>
                            <td class="text-center">N/A</td>
                        {% endif %}

                        <td class="text-center">
                            <a class="btn btn-warning" href="{{ url_for('log_ascent.log_ascent_user', id=boulder.id) }}">Log</a>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>No ranked boulders found.</p>
    {% endif %}

    <h1>Non-Ranked Boulders (V5 and below)</h1>
    {% if non_ranked_boulders %}
        <table class="table table-striped table-bordered" id="nonRankedBoulderTable" style="background-color: #76ABAE;">
            <thead>
                <tr>
                    <th class="text-center">Name</th>
                    <th class="text-center">Color</th>
                    <th class="text-center">Difficulty</th>
                    <th class="text-center">Moves</th>
                    <th class="text-center">Attempts</th>
                    <th class="text-center">Status</th>
                    <th class="text-center">Attempt Date</th>
                    <th class="text-center">Log Ascent</th>
                </tr>
            </thead>
            <tbody>
                {% for boulder in non_ranked_boulders %}
                    <tr>
                        <td class="text-center">{{ boulder.name }}</td>
                        <td>
                            <div class="card" style="background-color: {{ boulder.color }}; width: 30px; height: 30px; border-radius: 50%;"></div>
                        </td>
                        <td class="text-center">V{{ boulder.difficulty }}</td>
                        <td class="text-center">{{ boulder.numberofmoves }}</td>

                        {% set attempt = boulder.attempt %}
                        {% if attempt and attempt.status == 'incomplete' %}
                            <td class="text-center">{{ attempt.number_of_attempts }}</td>
                            <td class="text-center">
                                Incomplete ({{ attempt.moves_completed }} / {{ boulder.numberofmoves }} moves)
                            </td>
                            <td class="text-center">{{ attempt.attempt_date }}</td>
                        {% else %}
                            <td class="text-center">0</td>
                            <td class="text-center">No log record yet</td>
                            <td class="text-center">N/A</td>
                        {% endif %}

                        <td class="text-center">
                            <a class="btn btn-warning" href="{{ url_for('log_ascent.log_ascent_user', id=boulder.id) }}">Log</a>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>No non-ranked boulders found.</p>
    {% endif %}

    


    
    



</section>    

<div class="fixed bottom-0 left-0 z-50 w-full h-16 bg-white border-t border-gray-200 dark:bg-gray-700 dark:border-gray-600">
    <div class="grid h-full max-w-lg grid-cols-4 mx-auto font-medium">
        <a href="{{ url_for('auth.user_page') }}" class="inline-flex flex-col items-center justify-center px-5 border-gray-200 border-x hover:bg-gray-50 dark:hover:bg-gray-800 group dark:border-gray-600">
            <svg class="w-5 h-5 mb-2 text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
                <path d="m19.707 9.293-2-2-7-7a1 1 0 0 0-1.414 0l-7 7-2 2a1 1 0 0 0 1.414 1.414L2 10.414V18a2 2 0 0 0 2 2h3a1 1 0 0 0 1-1v-4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v4a1 1 0 0 0 1 1h3a2 2 0 0 0 2-2v-7.586l.293.293a1 1 0 0 0 1.414-1.414Z"/>
            </svg>
            <span class="text-sm text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500">Profile</span>
        </a>
        <a href="{{ url_for('log_ascent.archive') }}" class="inline-flex flex-col items-center justify-center px-5 border-e border-gray-200 hover:bg-gray-50 dark:hover:bg-gray-800 group dark:border-gray-600">
            <svg class="w-5 h-5 mb-2 text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
                <path d="M11.074 4 8.442.408A.95.95 0 0 0 7.014.254L2.926 4h8.148ZM9 13v-1a4 4 0 0 1 4-4h6V6a1 1 0 0 0-1-1H1a1 1 0 0 0-1 1v13a1 1 0 0 0 1 1h17a1 1 0 0 0 1-1v-2h-6a4 4 0 0 1-4-4Z"/>
                <path d="M19 10h-6a2 2 0 0 0-2 2v1a2 2 0 0 0 2 2h6a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1Zm-4.5 3.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2ZM12.62 4h2.78L12.539.41a1.086 1.086 0 1 0-1.7 1.352L12.62 4Z"/>
            </svg>
            <span class="text-sm text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500">Archive</span>
        </a>
        <a href="{{ url_for('leaderboards.leaderboards') }}" class="inline-flex flex-col items-center justify-center px-5 hover:bg-gray-50 dark:hover:bg-gray-800 group">
            <svg class="w-5 h-5 mb-2 text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">
                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 12.25V1m0 11.25a2.25 2.25 0 0 0 0 4.5m0-4.5a2.25 2.25 0 0 1 0 4.5M4 19v-2.25m6-13.5V1m0 2.25a2.25 2.25 0 0 0 0 4.5m0-4.5a2.25 2.25 0 0 1 0 4.5M10 19V7.75m6 4.5V1m0 11.25a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5ZM16 19v-2"/>
            </svg>
            <span class="text-sm text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500">Leaderboards</span>
        </a>
        <a href="{{ url_for('auth.logout') }}" class="inline-flex flex-col items-center justify-center px-5 border-gray-200 hover:bg-gray-50 dark:hover:bg-gray-800 group border-x dark:border-gray-600">
            <svg class="w-5 h-5 mb-2 text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
                <path d="M10 0a10 10 0 1 0 10 10A10.011 10.011 0 0 0 10 0Zm0 5a3 3 0 1 1 0 6 3 3 0 0 1 0-6Zm0 13a8.949 8.949 0 0 1-4.951-1.488A3.987 3.987 0 0 1 9 13h2a3.987 3.987 0 0 1 3.951 3.512A8.949 8.949 0 0 1 10 18Z"/>
            </svg>
            <span class="text-sm text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500">Logout</span>
        </a>
    </div>
</div>


{% endblock %}
