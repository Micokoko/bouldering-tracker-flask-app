{% extends 'base.html' %}

{% block content %}
<div class="flex flex-col justify-center items-center">
<section class="flex justify-self-center text-white p-6">

    <div class="flex justify-center w-full max-w-sm bg-white border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-70">
        <div class="flex flex-col my-2 items-center pb-10 w-80">
            <img class="w-24 h-24 mb-3 rounded-full shadow-lg" src="{{ url_for('static', filename='uploads/DOG.png') }}" alt="Dog photo for now"/>
            <header>
            <h1 class="mb-1 text-xl font-medium text-gray-900 dark:text-white">{{ g.user['firstname'] }} {{ g.user['Lastname'] }}</h1>
            </header>

            <div class="flex space-x-3">
                <div class="inline w-36 p-3 border border-gray-200 rounded-lg shadow">
                    Highest grade climbed: <span class="font-bold text-2xl">v{{ highest_grade_climbed }}</span>
                </div>
                <div class="inline w-36 p-3 border border-gray-200 rounded-lg shadow">
                    Highest grade flashed: <span class="font-bold text-2xl">v{{ highest_grade_flashed }}</span>
                </div>
            </div>
            
            <div class="inline w-36 p-3 mt-4 border border-gray-200 rounded-lg shadow">
                Total boulders sent: <span class="font-bold text-2xl">{{ boulders_completed }}</span>
            </div>
        </div>
    </div>


</section> 


<h1 class="font-bold text-2xl">Ranked Boulders</h1>
<h1 class="font-bold text-2xl">(V6 and above)</h1>
<section class="mt-5">
    {% if ranked_boulders %}
        {% for boulder in ranked_boulders %}
        <div class="flex flex-col items-center border border-gray-200 rounded-lg shadow md:max-w-xl dark:bg-gray-800 w-full max-w-xs h-auto mb-4 text-left">
            <h5 class="text-xl font-semibold p-4 border-b border-gray-200 dark:border-gray-700">{{ boulder.name }}</h5>
            {% if boulder.image %}
            <img class="w-full h-auto pt-4 md:w-48 md:h-48" src="{{ url_for('static', filename='uploads/' + boulder.image) }}" alt="{{ boulder.name }}">
            {% else %}
            <img class="w-full h-auto pt-4 md:w-48 md:h-48" src="{{ url_for('static', filename='images/spray-wall.jpg') }}" alt="Spray Wall">
            {% endif %}

            <div class="flex flex-col justify-between p-4 leading-normal w-full">
                <p class="mb-1 font-normal text-gray-700 dark:text-gray-400">Description: {{ boulder.description }}</p>
                <p class="mb-1 font-normal text-gray-700 dark:text-gray-400">Difficulty: V{{ boulder.difficulty }}</p>
                <p class="mb-1 font-normal text-gray-700 dark:text-gray-400" >                    Color of holds: 
                    <div class="ml-2" style="background-color: {{ boulder.color }}; width: 30px; height: 30px; border-radius: 50%;"></div>
                </p>                
                            
                <p class="mb-1 font-normal text-gray-700 dark:text-gray-400">Number of moves: {{ boulder.numberofmoves }}</p>

                {% set attempt = boulder.attempt %}
                {% if attempt %}
                    <p class="mb-1 font-normal text-gray-700 dark:text-gray-400">Status:</p>
                    <p class="mb-1 font-normal text-gray-700 dark:text-gray-400">
                        {% if attempt.status == 'incomplete' %}
                            {{ attempt.number_of_attempts }} attempts - Incomplete ({{ attempt.moves_completed }} / {{ boulder.numberofmoves }} moves)
                        {% else %}
                            Completed
                        {% endif %}
                    </p>
                    <p class="mb-1 font-normal text-gray-700 dark:text-gray-400">Attempt date: {{ attempt.attempt_date }}</p>
                    <p class="text-center mt-5 mb-3"><a class="text-white bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-blue-300 dark:focus:ring-blue-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center me-2 mb-2" href="{{ url_for('log_ascent.log_ascent_user', id=boulder.id) }}">Update Log</a></p>
                {% else %}
                    <p class="mb-3 font-normal text-gray-700 dark:text-gray-400">No log record yet</p>
                    <p class="text-center mt-5 mb-3">
                        <a class="text-white bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-blue-300 dark:focus:ring-blue-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center me-2 mb-2" href="{{ url_for('log_ascent.log_ascent_user', id=boulder.id) }}">Log</a>
                    </p>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    {% else %}
        <p>No ranked boulders found.</p>
    {% endif %}
</section>


<h1 class="font-bold text-2xl">Non-Ranked Boulders</h1>
<h1 class="font-bold text-2xl">(V5 and below)</h1>
<section class="pb-40 mt-5">
    {% if non_ranked_boulders %}
        {% for boulder in non_ranked_boulders %}
        <div class="flex flex-col items-center border border-gray-200 rounded-lg shadow md:max-w-xl dark:bg-gray-800 w-full max-w-xs h-auto mb-4 text-left">
            <h5 class="text-xl font-semibold p-4 border-b border-gray-200 dark:border-gray-700">{{ boulder.name }}</h5>
            {% if boulder.image %}
            <img class="w-full h-auto pt-4 md:w-48 md:h-48" src="{{ url_for('static', filename='uploads/' + boulder.image) }}" alt="{{ boulder.name }}">
            {% else %}
            <img class="w-full h-auto pt-4 md:w-48 md:h-48" src="{{ url_for('static', filename='images/spray-wall.jpg') }}" alt="Spray Wall">
            {% endif %}

            <div class="flex flex-col justify-between p-4 leading-normal w-full">
                <p class="mb-1 font-normal text-gray-700 dark:text-gray-400">Description: {{ boulder.description }}</p>
                <p class="mb-1 font-normal text-gray-700 dark:text-gray-400">Difficulty: V{{ boulder.difficulty }}</p>
                <p class="mb-1 font-normal text-gray-700 dark:text-gray-400" >                    Color of holds:
                    <div style="background-color: {{ boulder.color }}; width: 30px; height: 30px; border-radius: 50%;"></div>
                </p>
                <p class="mb-1 font-normal text-gray-700 dark:text-gray-400">Number of moves: {{ boulder.numberofmoves }}</p>
                
                {% set attempt = boulder.attempt %}
                {% if attempt %}
                    <p class="mb-1 font-normal text-gray-700 dark:text-gray-400">Status:</p>
                    <p class="mb-1 font-normal text-gray-700 dark:text-gray-400">
                        {% if attempt.status == 'incomplete' %}
                            {{ attempt.number_of_attempts }} attempts - Incomplete ({{ attempt.moves_completed }} / {{ boulder.numberofmoves }} moves)
                        {% else %}
                            Completed
                        {% endif %}
                    </p>
                    <p class="mb-3 font-normal text-gray-700 dark:text-gray-400">Attempt date: {{ attempt.attempt_date }}</p>
                    <p class="text-center mt-5 mb-3"><a class="text-white bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-blue-300 dark:focus:ring-blue-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center me-2 mb-2" href="{{ url_for('log_ascent.log_ascent_user', id=boulder.id) }}">Update Log</a></p>
                {% else %}
                    <p class="mb-3 font-normal text-gray-700 dark:text-gray-400">No log record yet</p>
                    <p class="text-center mt-5 mb-3"><a class="text-white bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-blue-300 dark:focus:ring-blue-800 font-medium rounded-lg text-sm px-5 py-2.5 text-center me-2 mb-2" href="{{ url_for('log_ascent.log_ascent_user', id=boulder.id) }}">Log</a></p>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    {% else %}
        <p>No ranked boulders found.</p>
    {% endif %}
</section>




    <div class="fixed bottom-0 left-0 z-50 w-full h-16 bg-white border-t border-gray-200 dark:bg-gray-700 dark:border-gray-600">
        <div class="grid h-full max-w-lg grid-cols-4 mx-auto font-medium">
            <a href="{{ url_for('auth.user_page') }}" class="inline-flex flex-col items-center justify-center px-5 border-gray-200 border-x bg-gray-800 group dark:border-gray-600">
                <svg class="w-5 h-5 mb-2 text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
                    <path d="m19.707 9.293-2-2-7-7a1 1 0 0 0-1.414 0l-7 7-2 2a1 1 0 0 0 1.414 1.414L2 10.414V18a2 2 0 0 0 2 2h3a1 1 0 0 0 1-1v-4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v4a1 1 0 0 0 1 1h3a2 2 0 0 0 2-2v-7.586l.293.293a1 1 0 0 0 1.414-1.414Z"/>
                </svg>
                <span class="text-sm text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500">Home</span>
            </a>
            <a href="{{ url_for('log_ascent.archive') }}" class="inline-flex flex-col items-center justify-center px-5 border-e border-gray-200 hover:bg-gray-50 dark:hover:bg-gray-800 group dark:border-gray-600">
                <svg class="w-5 h-5 mb-2 text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M11.074 4 8.442.408A.95.95 0 0 0 7.014.254L2.926 4h8.148ZM9 13v-1a4 4 0 0 1 4-4h6V6a1 1 0 0 0-1-1H1a1 1 0 0 0-1 1v13a1 1 0 0 0 1 1h17a1 1 0 0 0 1-1v-2h-6a4 4 0 0 1-4-4Z"/>
                    <path d="M19 10h-6a2 2 0 0 0-2 2v1a2 2 0 0 0 2 2h6a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1Zm-4.5 3.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2ZM12.62 4h2.78L12.539.41a1.086 1.086 0 1 0-1.7 1.352L12.62 4Z"/>
                </svg>
                <span class="text-sm text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500">Archive</span>
            </a>
            <a href="{{ url_for('leaderboards.leaderboards') }}" class="inline-flex flex-col items-center justify-center px-5 hover:bg-gray-50 dark:hover:bg-gray-800 group">
                <svg class="w-6 h-6 mb-2 text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" d="M3 4.5h14.25M3 9h9.75M3 13.5h5.25m5.25-.75L17.25 9m0 0L21 12.75M17.25 9v12" stroke-width="2" />
                </svg>
                <span class="text-sm text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500">Leaderboards</span>
            </a>
            <a href="{{ url_for('auth.logout') }}" class="inline-flex flex-col items-center justify-center px-5 border-gray-200 hover:bg-gray-50 dark:hover:bg-gray-800 group border-x dark:border-gray-600">
                <svg class="w-6 h-6  mb-2 text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M11.42 15.17 17.25 21A2.652 2.652 0 0 0 21 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.317-.384.74-.626 1.208-.766M11.42 15.17l-4.655 5.653a2.548 2.548 0 1 1-3.586-3.586l6.837-5.63m5.108-.233c.55-.164 1.163-.188 1.743-.14a4.5 4.5 0 0 0 4.486-6.336l-3.276 3.277a3.004 3.004 0 0 1-2.25-2.25l3.276-3.276a4.5 4.5 0 0 0-6.336 4.486c.091 1.076-.071 2.264-.904 2.95l-.102.085m-1.745 1.437L5.909 7.5H4.5L2.25 3.75l1.5-1.5L7.5 4.5v1.409l4.26 4.26m-1.745 1.437 1.745-1.437m6.615 8.206L15.75 15.75M4.867 19.125h.008v.008h-.008v-.008Z" />
                </svg>
                <span class="text-sm text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500">Settings</span>
            </a>
        </div>
    </div>
</div>




{% endblock %}
